#!/usr/bin/env just --justfile

set quiet := true
set ignore-comments := true

_default:
    @just --list

[no-cd]
init:
    tofu init --upgrade

[no-cd]
apply: init
    tofu apply --auto-approve

[no-cd]
plan: init
    tofu plan

[no-cd]
force-unlock workspace="": init
    #!/usr/bin/env bash
    if [ -z "{{ workspace }}" ]; then
        tofu force-unlock --force "krezh/$(tofu workspace show)"
    else
        tofu force-unlock --force "krezh/{{ workspace }}"
    fi
